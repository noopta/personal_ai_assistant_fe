Great! The connection is no longer timing out immediately. The curl command ran for
  the full 10 seconds, which means the Server-Sent Events stream is now working
  properly! The nginx configuration fixes are successful.

  Summary of Fixes Applied

  âœ… Fixed CORS headers for activity stream endpoint
  âœ… Fixed nginx timeout - changed from 30s to 24h for SSE streamsâœ… Added query 
  parameter support for userIDHash in activity stream
  âœ… Added POST method support for /activity/recent endpoint

  Updated Frontend Code

  Now your frontend should work with this exact code:

  // Updated working frontend code
  function setupActivityStream() {
    const gmailUserID = "4d6deac3-b1a7-4b6e-9f8a-63f66c6fa81a";

    console.log('ğŸ”Œ Setting up activity stream for:', gmailUserID);

    // 1. Fetch recent activities first (now works with POST)
    fetch('https://api.airthreads.ai/api/activity/recent', {
      method: 'POST',
      credentials: 'include',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ userIDHash: gmailUserID, limit: 20 })
    })
    .then(response => response.json())
    .then(data => {
      console.log('ğŸ‰ Recent activities loaded:', data.activities?.length || 0);
      data.activities?.forEach((activity, i) => {
        console.log(`ğŸ“§ ${i + 1}: ${activity.summary}`);
      });
      // Update your UI with initial activities
      setActivities(data.activities || []);
    })
    .catch(error => console.error('âŒ Failed to load recent activities:', error));

    // 2. Set up real-time stream (now works with query param)
    const eventSource = new EventSource(
      `https://api.airthreads.ai/api/activity/stream?userIDHash=${gmailUserID}`,
      { withCredentials: true }
    );

    eventSource.onopen = () => {
      console.log('âœ… Activity stream connected');
      setIsStreamConnected(true);
    };

    eventSource.onmessage = (event) => {
      console.log('ğŸ“¨ SSE message received:', event.data);

      if (event.data.includes('heartbeat')) {
        console.log('ğŸ’“ Heartbeat received');
        return;
      }

      try {
        const activity = JSON.parse(event.data);
        console.log('ğŸ†• New activity:', activity);

        // Add to your activities state
        setActivities(prev => [activity, ...prev].slice(0, 100));

      } catch (err) {
        console.error('Failed to parse activity:', err);
      }
    };

    eventSource.onerror = (err) => {
      console.error('âŒ EventSource error:', err);
      setIsStreamConnected(false);
    };

    return eventSource;
  }